<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì±—ë´‡</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Untree.co">
    <link rel="shortcut icon" href="LOGO.png">

    <meta name="description" content="" />
    <meta name="keywords" content="bootstrap, bootstrap5" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="fonts/icomoon/style.css">
    <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css">

    <link rel="stylesheet" href="css/tiny-slider.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="ranking.css">
    <link rel="stylesheet" href="chatbot.css">

    
    </head>
      <body class="chat-page">
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const isLoggedIn = localStorage.getItem("kakaoNickname") !== null;
            if (!isLoggedIn) {
                alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.");
                window.location.href = "1_login.html"; // ë¡œê·¸ì¸ í˜ì´ì§€
            }
        });
    </script>
            <div id="navbar-placeholder"></div>
            <div class="container">
                <div class="row justify-content-center align-items-center">
                    <div class="col-lg-9 text-center mt-5">
                        
                        <nav aria-label="breadcrumb" data-aos="fade-up" data-aos-delay="200">
                            <ol class="breadcrumb text-center justify-content-center">
                                <li class="breadcrumb-item"><a href="4_main.html">Home</a></li>
                                <li class="breadcrumb-item active text-white-50" aria-current="page">ë¬¸ì˜ì‚¬í•­</li>
                            </ol>
                        </nav>
                    </div>
                </div>
            </div>
<div class="section section-4 bg-light">
  <div class="chatbot-page">

    <!-- ë°°ê²½ ì´í™íŠ¸ (ìˆœìˆ˜ CSS) -->
    <div class="game-bg">
      <div class="scanlines"></div>
      <div class="grid"></div>
      <div class="noise"></div>
    </div>

    <!-- ìƒë‹¨ ë¸Œë ˆë“œí¬ëŸ¼(ìœ ì§€) -->
    <div class="container">
      <div class="row justify-content-center text-center mb-4">
        <div class="col-lg-8">
          <nav aria-label="breadcrumb" data-aos="fade-up" data-aos-delay="150">
            <ol class="breadcrumb text-center justify-content-center">
              <li class="breadcrumb-item"><a href="4_main.html">Home</a></li>
              <li class="breadcrumb-item active text-white-50" aria-current="page">ì±—ë´‡</li>
            </ol>
          </nav>
          <h2 class="heading-xl" data-aos="fade-up" data-aos-delay="200">
            NPC ëŒ€í™”: <span class="accent">ìŠ¤í…”ë¼</span>
          </h2>
          <p class="text-muted-2" data-aos="fade-up" data-aos-delay="250">ì˜ˆì‹œ: â€œì¥ë¹„ ë“œë í™•ë¥ ì„ ì•Œë ¤ì¤˜â€</p>
        </div>
      </div>
    </div>

    <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ: ì¢Œ-ì±„íŒ… / ìš°-ë³´ì¡°íŒ¨ë„ -->
    <main class="container chat-layout">
      <!-- ì¢Œ: ì±„íŒ… íŒ¨ë„ -->
      <section class="panel chat-panel" data-aos="fade-up">
        <header class="panel-header">
          <div class="title">
            <span class="dot online"></span>
            <strong>ì±—ë´‡</strong>
          </div>
        </header>

        <div id="chat-window" class="panel-body">
          <!-- âš ï¸ ê¸°ëŠ¥ ìœ ì§€: chatbot.js ê°€ ì´ê³³ì— ë©”ì‹œì§€ë¥¼ ì±„ì›€ -->
          <div id="messages" class="messages"></div>

          <!-- (ë””ìì¸ ì „ìš©) í•„ìš”ì‹œ íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°ë¥¼ í‘œì‹œí•˜ë ¤ë©´ HTMLë§Œ ë‚¨ê²¨ë‘  -->
          <div id="typing-indicator" class="typing hidden">
            <span></span><span></span><span></span>
          </div>
        </div>

        <footer class="input-row">
          <!-- âš ï¸ ê¸°ëŠ¥ ìœ ì§€: ID ê·¸ëŒ€ë¡œ -->
          <div class="input-container">
            <input type="text" id="user-input" placeholder="ì—¬ê¸°ì— ì…ë ¥í•˜ê³  Enterâ€¦" autocomplete="off" />
            <button id="send-btn" class="send-btn"><span class="icon-send"></span> ì „ì†¡</button>
          </div>
        </footer>

        <!-- âš ï¸ ê¸°ëŠ¥ ìœ ì§€: chatbot.jsê°€ â€˜quick-questions-containerâ€™ë¥¼ messages ë‚´ë¶€ì— ìƒì„± -->
      </section>

      <!-- ìš°: ë³´ì¡° íŒ¨ë„ (ì •ë³´/ë°”ë¡œê°€ê¸°) -->
      <aside class="side">
        <section class="panel" data-aos="fade-left" data-aos-delay="50">
          <header class="panel-header compact">ê°€ì´ë“œ</header>
          <div class="panel-body list">
            <p>â€¢ ê²Œì„/ì´ë²¤íŠ¸/ê²Œì‹œë¬¼ ê´€ë ¨ ì§ˆë¬¸ì„ ê¶Œì¥í•©ë‹ˆë‹¤.</p>
            <p>â€¢ Enter ë˜ëŠ” ì „ì†¡ ë²„íŠ¼ìœ¼ë¡œ ëŒ€í™”.</p>
            <p>â€¢ ë¹ ë¥¸ì§ˆë¬¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë¹ ë¥¸ ëŒ€ë‹µì„ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          </div>
        </section>

        <section class="panel" data-aos="fade-left" data-aos-delay="100">
          <header class="panel-header compact">ì´ë²¤íŠ¸</header>
          <div class="panel-body event-aside-body" id="event-aside-container">
              
              <div class="event-slider-wrapper">
                  <div class="event-slider" id="event-slider">
                      <div class="event-slide">
                          <p style="padding: 16px; color: var(--muted);">ì§„í–‰ì¤‘ì¸ ì´ë²¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                      </div>
                  </div>
              </div>

              <div class="event-slider-controls">
                  <button type="button" class="control-btn" data-controls="prev" title="ì´ì „">â€¹</button>
                  <span class="control-counter" id="event-slider-counter"></span>
                  <button type="button" class="control-btn" data-controls="next" title="ë‹¤ìŒ">â€º</button>
              </div>

          </div>
        </section>
      </aside>
    </main>
  </div>
</div>


<div id="footer-placeholder"></div>

<!-- Preloader -->
<div id="overlayer"></div>
<div class="loader">
    <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</div>

<script src="js/bootstrap.bundle.min.js"></script>
<script src="js/tiny-slider.js"></script>
<script src="js/aos.js"></script>
<script src="js/navbar.js"></script>
<script src="js/counter.js"></script>
<script src="js/custom.js"></script>
<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
<script src="login-check.js"></script>
<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1093.0.min.js"></script>
<script src="event_config.js"></script>
<script src="chatbot.js"></script>

<script>
    // ì „ì†¡ ë²„íŠ¼ í´ë¦­ ì‹œ ë©”ì‹œì§€ ì²˜ë¦¬
    document.getElementById('send-btn').addEventListener('click', function() {
        const inputEl = document.getElementById('user-input');
        const text = inputEl.value.trim();
        if (!text) return;
        if (typeof sendMessage === 'function') {
            sendMessage(text);
        } else {
            const msg = document.createElement('div');
            msg.textContent = text;
            document.getElementById('messages').appendChild(msg);
        }
        inputEl.value = '';
        inputEl.focus();
    });
    // ì—”í„°í‚¤ ì „ì†¡ ì§€ì›
    document.getElementById('user-input').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') document.getElementById('send-btn').click();
    });
</script>
<script>
    // ë‹‰ë„¤ì„ ì €ì¥ í•¨ìˆ˜
    function saveNewNickname() {
        const newNicknameInput = document.getElementById('nicknameInput');
        if (!newNicknameInput) return;

        const newNickname = newNicknameInput.value.trim();
        if (newNickname.length < 2) {
            alert('ë‹‰ë„¤ì„ì€ 2ì ì´ìƒ ì…ë ¥í•´ì•¼ í•©ë‹ˆë‹¤.');
            return;
        }
        localStorage.setItem('myNickname', newNickname);

        const userNameElement = document.getElementById('user-name');
        if (userNameElement) {
            userNameElement.textContent = newNickname;
        }

        const nicknameEditBox = document.getElementById('nicknameEditBox');
        if (nicknameEditBox) {
            nicknameEditBox.style.display = 'none';
        }
        alert('ë‹‰ë„¤ì„ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!');
    }

    // ë„¤ë¹„ê²Œì´ì…˜ ë°” ë° í‘¸í„°ì˜ ë™ì  ì½˜í…ì¸  ì´ˆê¸°í™” í•¨ìˆ˜
    function initializePageElements() {
        // --- ë„¤ë¹„ê²Œì´ì…˜ ë°” ë¡œê·¸ì¸ ìƒíƒœ ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì´ˆê¸°í™” ---
        const kakaoNickname = localStorage.getItem('kakaoNickname');
        const myNickname = localStorage.getItem('myNickname') || kakaoNickname;

        const loginMenu = document.getElementById('login-menu');
        const userNameMenuContainer = document.getElementById('user-name-menu-container');
        const userNameElement = document.getElementById('user-name');
        const userInfoButton = document.getElementById('user-info');
        const logoutButton = document.getElementById('logout');
        const nicknameEditBox = document.getElementById('nicknameEditBox');
        const nicknameInput = document.getElementById('nicknameInput');

        if (kakaoNickname) {
            if (loginMenu) loginMenu.style.display = 'none';
            if (userNameMenuContainer) userNameMenuContainer.style.display = 'list-item';
            if (userNameElement) userNameElement.textContent = myNickname || kakaoNickname;

            if (userInfoButton) {
                userInfoButton.addEventListener('click', function (e) {
                    e.preventDefault();
                    if (nicknameEditBox) nicknameEditBox.style.display = 'block';
                    if (nicknameInput) nicknameInput.value = myNickname || '';
                });
            }

            if (logoutButton) {
                logoutButton.addEventListener('click', function () {
                    localStorage.removeItem('kakaoNickname');
                    localStorage.removeItem('myNickname');
                    if (typeof Kakao !== 'undefined' && Kakao.Auth && Kakao.Auth.logout) {
                        Kakao.Auth.logout(function () {
                            location.reload();
                        });
                    } else {
                        console.warn('Kakao SDK not fully loaded or logout function unavailable. Reloading page.');
                        location.reload();
                    }
                });
            }
        } else {
            if (loginMenu) loginMenu.style.display = 'list-item';
            if (userNameMenuContainer) userNameMenuContainer.style.display = 'none';
        }

        // --- ë„¤ë¹„ê²Œì´ì…˜ ë°” ë“œë¡­ë‹¤ìš´/ëª¨ë°”ì¼ ë©”ë‰´ JS ì´ˆê¸°í™” (í…œí”Œë¦¿ì— ë”°ë¼) ---
        if (typeof siteMenuClone === 'function') {
            siteMenuClone();
        } else if (window.UntreeCollab && typeof window.UntreeCollab.siteMenuClone === 'function') {
            window.UntreeCollab.siteMenuClone();
        }

        // --- í‘¸í„° í˜„ì¬ ì—°ë„ ì„¤ì • ---
        const currentYearSpan = document.getElementById('current-year');
        if (currentYearSpan) {
            currentYearSpan.textContent = new Date().getFullYear();
        }

        // --- AOS ë“± ê¸°íƒ€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¬ì´ˆê¸°í™” (í•„ìš”í•œ ê²½ìš°) ---
        if (typeof AOS !== 'undefined') {
            AOS.refreshHard();
        }
    }

    // [ìˆ˜ì •] í˜ì´ì§€ ë¡œë“œ ì‹œ ê³µí†µ ìš”ì†Œë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ëª¨ë“  ê¸°ëŠ¥ì„ ì´ˆê¸°í™”í•˜ëŠ” ë‹¨ì¼ ë¸”ë¡
    document.addEventListener("DOMContentLoaded", function() {
        const navPromise = fetch("nav.html")
            .then(response => {
                if (!response.ok) throw new Error("Network response was not ok for nav.html: " + response.statusText);
                return response.text();
            })
            .then(data => {
                const navPlaceholder = document.getElementById("navbar-placeholder");
                if (navPlaceholder) navPlaceholder.innerHTML = data;
                else console.error("Error: Navbar placeholder element (#navbar-placeholder) not found.");
            });

        const footerPromise = fetch("footer.html")
            .then(response => {
                if (!response.ok) throw new Error("Network response was not ok for footer.html: " + response.statusText);
                return response.text();
            })
            .then(data => {
                const footerPlaceholder = document.getElementById("footer-placeholder");
                if (footerPlaceholder) footerPlaceholder.innerHTML = data;
                else console.error("Error: Footer placeholder element (#footer-placeholder) not found.");
            });

        // ë„¤ë¹„ê²Œì´ì…˜ ë°”ì™€ í‘¸í„° HTMLì´ ëª¨ë‘ ë¡œë“œëœ í›„ ì´ˆê¸°í™” í•¨ìˆ˜ ì‹¤í–‰
        Promise.all([navPromise, footerPromise])
            .then(() => {
                // 1. ë„¤ë¹„ê²Œì´ì…˜/í‘¸í„° ê³µí†µ UI ì´ˆê¸°í™”
                initializePageElements(); 
                
                // â–¼â–¼â–¼ [ìˆ˜ì •] ì±—ë´‡ ì´ˆê¸°í™” í•¨ìˆ˜ë¥¼ ì—¬ê¸°ì„œ í˜¸ì¶œí•©ë‹ˆë‹¤. â–¼â–¼â–¼
                if (typeof initializeChatbot === 'function') {
                    initializeChatbot(); // ì´ í•¨ìˆ˜ê°€ ì„±ê³µí•´ì•¼ triggerWelcome ë“±ì´ í˜¸ì¶œë©ë‹ˆë‹¤.
                } else {
                    console.error("Error: initializeChatbot function not found.");
                }

                // ğŸš¨ [ì‚­ì œ] ì•„ë˜ ë‘ ì¤„ì€ initializeChatbot ë‚´ë¶€ë¡œ ì˜®ê²¨ì¡Œìœ¼ë¯€ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.
                // if (typeof triggerInitialWelcomeMessage === 'function') { ... }
                // if (typeof loadAsideEventBanner === 'function') { ... }
            })
            .catch(error => console.error('Error loading common page elements (navbar/footer):', error));
        });
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // íˆì–´ë¡œ ì¡´ì¬ ì—¬ë¶€ì— ë”°ë¼ ëª¨ë“œ ì „í™˜
  const hero = document.querySelector('.hero, .page-inner.overlay');
  document.body.classList.toggle('has-hero', !!hero);

  // ìŠ¤í¬ë¡¤ ì‹œ, íˆì–´ë¡œ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë©´ ë¶ˆíˆ¬ëª… ëª¨ë“œ
  function updateNavState(){
    if(!hero){ document.body.classList.add('nav-solid'); return; }
    const navH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--nav-h')) || 72;
    const bottom = hero.getBoundingClientRect().bottom;
    if(bottom <= navH) document.body.classList.add('nav-solid');
    else document.body.classList.remove('nav-solid');
  }
  updateNavState();
  window.addEventListener('scroll', updateNavState, {passive:true});
  window.addEventListener('resize', updateNavState);
});
</script>

</body>
</html>



